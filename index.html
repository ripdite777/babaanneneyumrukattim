<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babaannene Tır Çarpmadan Kaç</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            text-align: center;
            padding-top: 50px;
        }
        #oyunAlani {
            position: relative;
            height: 500px;
            background-color: #333;
            margin: 0 auto;
            width: 80%;
            border: 2px solid #000;
            overflow: hidden;
        }
        #babaanne {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 70px;
        }
        .tir {
            position: absolute;
            width: 100px;
            height: 200px;
            background-color: #FF5733;
            left: 50%;
            transform: translateX(-50%);
        }
        #luckyblock {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('luckyblock.png'); /* Luckyblock resmini ekledik */
            background-size: cover;
            border-radius: 50%;
            z-index: 2;
        }
        #alert {
            display: none;
            padding: 10px;
            background-color: #ff0000;
            color: white;
            margin-top: 10px;
        }
        #luckyblockBildirim {
            margin-top: 20px;
            padding: 10px;
            background-color: #32CD32;
            color: white;
            font-size: 18px;
            display: none;
        }
        #canPng {
            width: 20px;
            height: 20px;
            background-image: url('canHakki.png'); /* Can hakkı png ekledik */
            background-size: cover;
            display: inline-block;
            margin: 0 5px;
        }
    </style>
</head>
<body>

    <h1>Babaannene Tır Çarpmadan Kaç</h1>
    <p id="puan">Puan: 0</p>
    <div id="can">
        Can: <span id="canHakki"></span>
    </div>
    <p id="dokunulmazlik">Dokunulmazlık: 0s</p>

    <div id="seviyeSecim">
        <h2>Zorluk Seçin</h2>
        <select id="seviyeSelect" onchange="setSeviye()">
            <option value="kolay">Kolay</option>
            <option value="normal">Normal</option>
            <option value="zor">Zor</option>
            <option value="pratik">Pratik Modu</option>
        </select>
    </div>

    <div id="oyunAlani">
        <img id="babaanne" src="images__7_-removebg-preview.png" alt="Babaanne">
        <div id="alert"></div>
    </div>

    <div id="luckyblockBildirim"></div>

    <audio id="carpmaSesi" src="carpma.mp3"></audio>
    <audio id="tokatSesi" src="tokat.mp3"></audio>
    <audio id="bonusSesi" src="bonus.mp3"></audio>
    
    <script>
        let oyunAlani = document.getElementById("oyunAlani");
        let babaanne = document.getElementById("babaanne");
        let puanGosterge = document.getElementById("puan");
        let canHakkiGosterge = document.getElementById("canHakki");
        let dokunulmazlikGosterge = document.getElementById("dokunulmazlik");
        let alertBox = document.getElementById("alert");
        let luckyblockBildirim = document.getElementById("luckyblockBildirim");
        let carpmaSesi = document.getElementById("carpmaSesi");
        let tokatSesi = document.getElementById("tokatSesi");
        let bonusSesi = document.getElementById("bonusSesi");

        let puan = 0;
        let can = 3;
        let tirHizi = 5;
        let seviyeler = {kolay: 3, normal: 2, zor: 1, pratik: 99};
        let seviye = 'kolay';
        let hareketEdiyor = false;
        let dokunulmazlik = 0;
        let luckyblocklar = [];
        let pratikModuAktif = false;

        // Zorluk seviyesini ayarlama
        function setSeviye() {
            seviye = document.getElementById("seviyeSelect").value;
            if (seviye === "pratik") {
                pratikModuAktif = true;
                can = 99;  // Sonsuz can hakkı veriyoruz
                puan = 0;
                canHakkiGosterge.innerHTML = '∞'; // Sonsuz can gösterimi
                dokunulmazlık = 0;
                dokunulmazlikGosterge.innerText = "Dokunulmazlık: 0s";
                clearLuckyblocks();
                oyunBaslat();
                showAlert("Pratik Modu Başlatıldı!");
            } else {
                pratikModuAktif = false;
                can = seviyeler[seviye];
                tirHizi = seviye === "zor" ? 8 : seviye === "normal" ? 5 : 3;
                puan = 0;
                puanGosterge.innerText = "Puan: " + puan;
                canHakkiGosterge.innerHTML = '';
                for (let i = 0; i < can; i++) {
                    let canIcon = document.createElement("div");
                    canIcon.id = "canPng";
                    canHakkiGosterge.appendChild(canIcon);
                }
                dokunulmazlık = 0;
                dokunulmazlikGosterge.innerText = "Dokunulmazlık: 0s";
                clearLuckyblocks();
                oyunBaslat();
            }
        }

        // Oyunu başlat
        function oyunBaslat() {
            setInterval(tirOlustur, 1500);
            setInterval(luckyblockOlustur, 5000); // Luckyblock her 5 saniyede bir
        }

        // Luckyblock oluştur
        function luckyblockOlustur() {
            let luckyblock = document.createElement("div");
            luckyblock.id = "luckyblock";
            luckyblock.style.left = Math.random() * (oyunAlani.clientWidth - 40) + "px";
            luckyblock.style.top = Math.random() * (oyunAlani.clientHeight - 40) + "px";
            oyunAlani.appendChild(luckyblock);
            luckyblocklar.push(luckyblock);

            let luckyblockInterval = setInterval(() => {
                luckyblock.style.top = luckyblock.offsetTop + 3 + "px";

                // Luckyblock'a dokunma
                if (carpistiMi(babaanne, luckyblock)) {
                    luckyblock.remove();
                    clearInterval(luckyblockInterval);
                    luckyblocklar = luckyblocklar.filter(block => block !== luckyblock);
                    luckyblockSampul();
                }

                // Luckyblock oyundan çıkarsa
                if (luckyblock.offsetTop > oyunAlani.clientHeight) {
                    luckyblock.remove();
                    clearInterval(luckyblockInterval);
                    luckyblocklar = luckyblocklar.filter(block => block !== luckyblock);
                }
            }, 20);
        }

        // Luckyblock bonus
        function luckyblockSampul() {
            let randomBonus = Math.random();
            let bonusMesaj = "";
            let bonusTuru = Math.floor(Math.random() * 12); // 12 farklı bonus ve ceza seçeneği

            switch (bonusTuru) {
                case 0:
                    puan += 100;
                    bonusMesaj = "+100 Puan Kazandınız!";
                    bonusSesi.play();
                    break;
                case 1:
                    puan -= 100;
                    bonusMesaj = "-100 Puan Kaybettiniz!";
                    break;
                case 2:
                    puan += 150;
                    bonusMesaj = "+150 Puan Kazandınız!";
                    bonusSesi.play();
                    break;
                case 3:
                    puan -= 150;
                    bonusMesaj = "-150 Puan Kaybettiniz!";
                    break;
                case 4:
                    puan += 200;
                    bonusMesaj = "+200 Puan Kazandınız!";
                    bonusSesi.play();
                    break;
                case 5:
                    puan -= 200;
                    bonusMesaj = "-200 Puan Kaybettiniz!";
                    break;
                case 6:
                    dokunulmazlık = 5;
                    bonusMesaj = "Dokunulmazlık: 5s!";
                    break;
                case 7:
                    dokunulmazlık = 10;
                    bonusMesaj = "Dokunulmazlık: 10s!";
                    break;
                case 8:
                    dokunulmazlık = 15;
                    bonusMesaj = "Dokunulmazlık: 15s!";
                    break;
                case 9:
                    bonusMesaj = "Tırlar Yok: 5 saniye!";
                    setTimeout(() => {
                        luckyblockOlustur(); // Tırları yok etme süresi
                    }, 5000);
                    break;
                case 10:
                    bonusMesaj = "Tırlar Yok: 10 saniye!";
                    setTimeout(() => {
                        luckyblockOlustur(); // Tırları yok etme süresi
                    }, 10000);
                    break;
                case 11:
                    bonusMesaj = "Tırlar Yok: 15 saniye!";
                    setTimeout(() => {
                        luckyblockOlustur(); // Tırları yok etme süresi
                    }, 15000);
                    break;
                default:
                    break;
            }

            luckyblockBildirim.innerText = bonusMesaj;
            luckyblockBildirim.style.display = "block";
            setTimeout(() => {
                luckyblockBildirim.style.display = "none";
            }, 2000);
        }

        // Çarpma kontrolü
        function carpistiMi(babaanne, obje) {
            let bRect = babaanne.getBoundingClientRect();
            let oRect = obje.getBoundingClientRect();

            return !(bRect.right < oRect.left || bRect.left > oRect.right || bRect.bottom < oRect.top || bRect.top > oRect.bottom);
        }

        // Uyarı gösterme
        function showAlert(message) {
            alertBox.innerText = message;
            alertBox.style.display = "block";
            setTimeout(() => {
                alertBox.style.display = "none";
            }, 2000);
        }

        // Araba oluştur
        function tirOlustur() {
            let tir = document.createElement("div");
            tir.className = "tir";
            tir.style.left = Math.random() * (oyunAlani.clientWidth - 100) + "px";
            oyunAlani.appendChild(tir);

            let tirInterval = setInterval(() => {
                tir.style.top = tir.offsetTop + tirHizi + "px";

                // Tır babaanneye çarptıysa
                if (carpistiMi(babaanne, tir)) {
                    if (dokunulmazlık > 0) {
                        dokunulmazlık -= 1;
                    } else {
                        if (can > 0) {
                            can--;
                            canHakkiGosterge.removeChild(canHakkiGosterge.lastChild);
                        } else {
                            showAlert("Game Over!");
                            clearInterval(tirInterval);
                            setTimeout(() => {
                                location.reload(); // Yeniden başlat
                            }, 3000);
                        }
                    }
                    carpmaSesi.play();
                    tir.remove();
                    clearInterval(tirInterval);
                }

                if (tir.offsetTop > oyunAlani.clientHeight) {
                    tir.remove();
                    clearInterval(tirInterval);
                }
            }, 20);
        }

        // Başlat
        setSeviye();
    </script>

</body>
</html>
