<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babaannene Tır Çarpmadan Kaç</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f0f0f0;
        }

        #oyunAlani {
            position: relative;
            width: 100%;
            height: 80%;
            border: 2px solid #000;
            overflow: hidden;
            background-color: #fff;
        }

        #babaanne {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background-image: url('images__7_-removebg-preview.png');
            background-size: cover;
            background-position: center;
        }

        #luckyblock {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('luckyblock.png');
            background-size: cover;
            border-radius: 50%;
            z-index: 2;
        }

        #canHakki {
            display: flex;
            margin-top: 10px;
        }

        .can-icon {
            width: 20px;
            height: 20px;
            background-image: url('canHakki.png');
            background-size: cover;
            display: inline-block;
            margin: 0 5px;
        }

        .seviye-secimi {
            margin-top: 20px;
            text-align: center;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }

        #alert {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }

        /* Dokunmatik butonlar */
        .control-buttons {
            position: fixed;
            bottom: 50px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .control-buttons button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="seviye-secimi">
        <h2>Zorluk Seçin</h2>
        <label>
            <input type="radio" name="zorluk" value="kolay"> Kolay
        </label>
        <label>
            <input type="radio" name="zorluk" value="normal"> Normal
        </label>
        <label>
            <input type="radio" name="zorluk" value="zor"> Zor
        </label>
        <label>
            <input type="radio" name="zorluk" value="pratik"> Pratik
        </label>
        <button onclick="setSeviye()">Başla</button>
    </div>

    <div id="oyunAlani">
        <div id="babaanne"></div>
        <div id="luckyblock"></div>
    </div>

    <div id="can">
        <div id="canHakki"></div>
    </div>

    <div id="alert"></div>

    <div class="control-buttons">
        <button id="solButton" onclick="hareket('sol')">←</button>
        <button id="sagButton" onclick="hareket('sag')">→</button>
    </div>

    <script>
        let can, tırHızı, dokunulmazlık, canHakkiGosterge, babaanne, luckyblock, alertBox;
        let carpmaSesi = new Audio('carpma.mp3'); // Ses dosyanızı buraya ekleyin

        function setSeviye() {
            const seviye = document.querySelector('input[name="zorluk"]:checked').value;
            if (!seviye) return alert("Lütfen bir zorluk seçin!");

            document.querySelector('.seviye-secimi').style.display = 'none'; // Zorluk seçimini gizle
            canHakkiGosterge = document.getElementById('canHakki');
            babaanne = document.getElementById('babaanne');
            luckyblock = document.getElementById('luckyblock');
            alertBox = document.getElementById('alert');

            switch (seviye) {
                case 'kolay':
                    can = 3;
                    tırHızı = 3;
                    break;
                case 'normal':
                    can = 2;
                    tırHızı = 4;
                    break;
                case 'zor':
                    can = 1;
                    tırHızı = 5;
                    break;
                case 'pratik':
                    can = 2; // Pratik modda da 2 can hakkı
                    tırHızı = 3;
                    break;
            }
            dokunulmazlık = 0;

            // Can hakkını göster
            canHakkiGosterge.innerHTML = ''; // Temizle
            for (let i = 0; i < can; i++) {
                const canHakkiIcon = document.createElement("div");
                canHakkiIcon.className = "can-icon";
                canHakkiIcon.style.backgroundImage = "url('canHakki.png')";
                canHakkiGosterge.appendChild(canHakkiIcon);
            }

            // Oyun başlat
            startGame();
        }

        function startGame() {
            let tirlar = [];
            let tirInterval;
            let luckyblockInterval;

            function tırlarYerleştir() {
                setInterval(() => {
                    const tir = document.createElement('div');
                    tir.classList.add('tir');
                    tir.style.top = "-100px";
                    tir.style.left = Math.random() * 100 + '%';
                    document.body.appendChild(tir);

                    let tirHızı = tırHızı;

                    let tirInterval = setInterval(() => {
                        tir.style.top = tir.offsetTop + tirHızı + "px";
                        if (carpistiMi(babaanne, tir)) {
                            handleCarpma(tir);
                        }

                        if (tir.offsetTop > document.getElementById('oyunAlani').clientHeight) {
                            tir.remove();
                            clearInterval(tirInterval);
                        }
                    }, 20);
                }, 1000);
            }

            function luckyblockOlustur() {
                luckyblock.style.top = 0;
                luckyblock.style.left = Math.random() * 100 + '%';
                let luckyblockSpeed = 2; // Luckyblock hızını ayarla
                let luckyblockInterval = setInterval(() => {
                    luckyblock.style.top = luckyblock.offsetTop + luckyblockSpeed + 'px';

                    if (luckyblock.offsetTop > document.getElementById('oyunAlani').clientHeight) {
                        clearInterval(luckyblockInterval);
                    }
                }, 20);
            }

            luckyblockInterval = setInterval(luckyblockOlustur, 5000);
            tırlarYerleştir();
        }

        function carpistiMi(babaanne, tir) {
            const babaanneRect = babaanne.getBoundingClientRect();
            const tirRect = tir.getBoundingClientRect();

            return !(
                babaanneRect.right < tirRect.left ||
                babaanneRect.left > tirRect.right ||
                babaanneRect.bottom < tirRect.top ||
                babaanneRect.top > tirRect.bottom
            );
        }

        function handleCarpma(tir) {
            if (dokunulmazlık > 0) {
                dokunulmazlık--;
            } else if (can > 0 && document.querySelector('input[name="zorluk"]:checked').value !== 'pratik') {
                // Pratik modunda ölme durumu yok
                if (can > 0) {
                    can--;
                    canHakkiGosterge.removeChild(canHakkiGosterge.lastChild);
                } else {
                    alertBox.innerHTML = "Game Over!";
                    alertBox.style.display = 'block';
                    setTimeout(() => {
                        location.reload(); // Yeniden başlat
                    }, 3000);
                }
            }
            carpmaSesi.play();
            tir.remove();
        }

        // Hareket fonksiyonu
        function hareket(durum) {
            let currentPos = babaanne.offsetLeft;
            const step = 50; // Adım büyüklüğü

            if (durum === 'sol' && currentPos > 0) {
                babaanne.style.left = (currentPos - step) + 'px';
            } else if (durum === 'sag' && currentPos < window.innerWidth - babaanne.offsetWidth) {
                babaanne.style.left = (currentPos + step) + 'px';
            }
        }

        // Mobil dokunmatik kontrol ekleme
        let startX;
        babaanne.addEventListener("touchstart", function(e) {
            startX = e.touches[0].clientX;
        });

        babaanne.addEventListener("touchmove", function(e) {
            let currentX = e.touches[0].clientX;
            let movement = currentX - startX;

            // Babaanne'yi sağa ve sola hareket ettirme
            let newPos = babaanne.offsetLeft + movement;
            if (newPos > 0 && newPos < window.innerWidth - babaanne.offsetWidth) {
                babaanne.style.left = newPos + 'px';
            }

            startX = currentX;
        });
    </script>
</body>
</html>
